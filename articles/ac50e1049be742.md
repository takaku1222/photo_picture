---
title: "ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ã®å®Ÿè£…(imagepicker)"
emoji: "ğŸ“·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter", "iOS","Android","tech"]
published: true
---
# ã¯ã˜ã‚ã«

ã“ã‚“ã«ã¡ã¯ã€ãŸã‹ãã§ã™ï¼

æ™®æ®µã¯ãƒãƒ³ã‚¿ãƒ³ãƒ†ãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ‰ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼ã¨ã„ã†éƒ½å†…ã®å­¦æ ¡ã«é€šã£ã¦ã„ã¾ã™ï¼
ä»Šç¾åœ¨ã€ä½œæˆã—ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã«ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§ã€ã‚¢ãƒ—ãƒªã¨ã¯é•ã£ãŸ
ã‚„ã‚Šæ–¹ã§ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã¿ãŸã®ã§è¨˜äº‹ã«ã—ã¾ã—ãŸã€‚

# äº‹å‰æº–å‚™


## image_pickerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«


ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã«ã€pubspec.yamlã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½åŠ ã—ã¾ã™ã€‚

```js:pubspec.yaml
dependencies:
  flutter:
    sdk: flutter
  // ä»¥ä¸‹ã‚’è¿½åŠ 
  image_picker: ^0.8.5+1
  ```


## iOS

æ¬¡ã«ã€ã‚«ãƒ¡ãƒ©ã‚„ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ä»¥ä¸‹ã®è¨­å®šã‚’ã—ã¾ã™ã€‚

```js:ios/Runner/Info.plist
<key>NSPhotoLibraryUsageDescription</key>
<string>This app requires to access your photo library</string>
<key>NSCameraUsageDescription</key>
<string>This app requires to add file to your camera</string>
<key>NSMicrophoneUsageDescription</key>
<string>This app requires to add file to your photo library your microphone</string>
```

## Android

androidã¯image_pickerãŒæ›´æ–°ã•ã‚Œã€secoped storageã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸãŸã‚
AndroidManifest.xml ã® <application> ã‚¿ã‚°ã« android:requestLegacyExternalStorage="true"
ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ã¯ç„¡ããªã£ãŸã®ã§è¨­å®šã¯ä¸è¦ã§ã™ã€‚


# ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½ã®å®Ÿè£…

ã‚«ãƒ¡ãƒ©ã‹ã‚‰å†™çœŸã‚’å–å¾—ã™ã‚‹éƒ¨åˆ†ã¯ä¸‹è¨˜ã«ãªã‚Šã¾ã™ã€‚
```js:snipet.dart
New API
picker.pickImage(source: ImageSource.camera); â­•ï¸

Old API
picker.getImage(source: ImageSource.camera);ã€€âŒ
```

getImageã¯ä½¿ãˆãªã„ã®ã§pickImageã‚’ä½¿ã„ã¾ã™ï¼





## å…¨ä½“ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰


```js:main.dart
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({Key? key, required this.title}) : super(key: key);

  final String title;

  @override
  State<MyHomePage> createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  // imagepickerã‚’ä½¿ã†ãŸã‚ã«æ¬¡ã®äºŒè¡Œã‚’è¿½åŠ ã™ã‚‹
  File? _image;
  final _picker = ImagePicker();


  Future getImageFromCamera() async {
    // ã‚«ãƒ¡ãƒ©ã‹ã‚‰å†™çœŸã‚’å–å¾—ã™ã‚‹éƒ¨åˆ†
    final pickedFile = await _picker.pickImage(source: ImageSource.camera);
    setState(() {
      if (pickedFile != null) {
        // å†™çœŸå–å¾—å¾Œã«_imageã‚’æ›´æ–°ã—ã¦è¡¨ç¤ºã—ã¦ã„ã‚‹
        _image = File(pickedFile.path);
      }
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('ã‚«ãƒ¡ãƒ©',
          style: TextStyle(color: Colors.white),
        ),
        backgroundColor: Colors.cyan,
      ),
      body: Center(
        // imageãŒnullã ã£ãŸã‚‰å†™çœŸã‚’æ’®ã‚‹
        child: _image == null?
            Text('å†™çœŸã‚’æ’®ã‚‹')
            : Image.file(_image!),
      ),
      // floatingActionButtonLocationã§ãƒœã‚¿ãƒ³ã®ä½ç½®ã‚’æŒ‡å®šã—ã¾ã™
      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,
      floatingActionButton: FloatingActionButton(
        onPressed: getImageFromCamera,
        child: Icon(Icons.photo_camera,
          // ã‚«ãƒ¡ãƒ©ã‚¢ã‚¤ã‚³ãƒ³ã®è‰²ã‚’æŒ‡å®š
          color: Colors.white,
        ),
        // ã‚¢ã‚¤ã‚³ãƒ³ã®èƒŒæ™¯ã®è‰²ã‚’æŒ‡å®š
        backgroundColor: Colors.cyan,
      ),
    );
  }
}
```


# å‹•ä½œç¢ºèª

![](https://storage.googleapis.com/zenn-user-upload/eb1e59ac90ec-20220513.png =230x)

![](https://storage.googleapis.com/zenn-user-upload/a6164b5ed99b-20220513.jpeg =90x)
*ã‚«ãƒ¡ãƒ©ãƒ¢ãƒ¼ãƒ‰*
![](https://storage.googleapis.com/zenn-user-upload/a8986c62c8ba-20220513.png =230x)

![](https://storage.googleapis.com/zenn-user-upload/a6164b5ed99b-20220513.jpeg =90x)
*æ’®å½±ã—ãŸå†™çœŸã‚’è¡¨ç¤º*
![](https://storage.googleapis.com/zenn-user-upload/99222a85d012-20220513.png =230x)


ã‚«ãƒ¡ãƒ©æ’®å½±ã¨å†™çœŸã®è¡¨ç¤ºãŒã§ãã¾ã—ãŸï¼
imagepickerã‚’ä½¿ãˆã°ã‚ºãƒ¼ãƒ æ©Ÿèƒ½ã‚„å¤–ã‚«ãƒ¡ãƒ©ã€ã‚¤ãƒ³ã‚«ãƒ¡ãƒ©ã‚‚ä½¿ãˆã¾ã™ğŸ‰

# ã•ã„ã”ã«

åˆã‚ã¦è¨˜äº‹ã‚’æ›¸ã„ã¦ã¿ã¦ã€è‡ªåˆ†ãŒæ€ã„æã„ã¦ã„ã‚‹ã“ã¨ã‚’å½¢ã«ã™ã‚‹é›£ã—ã•
ç†è§£ã—ãŸã“ã¨ã‚’è¨€è‘‰ã«ã™ã‚‹é›£ã—ã•ã€ã‚‚ã£ã¨å‹‰å¼·ã—ãªãã‚ƒãªã¨æ”¹ã‚ã¦æ€ã„ã¾ã—ãŸã€‚

å¾Œã€æ™®æ®µç‰©å‡„ããŠä¸–è©±ã«ãªã£ã¦ã„ã‚‹Flutterå¤§å­¦ã®URLè²¼ã£ã¨ãã¾ã™ï¼
è³ªå•zoomã‚„å…±åŒé–‹ç™ºã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äº¤æµä¼šãªã©ã¨ã¦ã‚‚å……å®Ÿã—ã¦ã„ã‚‹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§è‡ªåˆ†ãŒæŒ‘æˆ¦ã—ã¦ã„ã‚‹ã“ã¨ã‚„ã€è‡ªåˆ†ã®å¼±ã•ãªã©å…¨éƒ¨å—ã‘æ­¢ã‚ã¦ãã‚Œã‚‹ãã‚“ãªå ´æ‰€ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
æµã¾ã‚ŒãŸç’°å¢ƒã«ã„ã‚‰ã‚Œã‚‹ã“ã¨ã«æ„Ÿè¬ã—ã¦æ—¥ã€…æŒ‘æˆ¦ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ï¼

è‡ªåˆ†ã¨æ­³ãŒè¿‘ã„äººãŒå…¥ã£ã¦ãã‚Œã‚‹ã¨å¬‰ã—ã„ã§ã™ï¼ç¬‘
https://flutteruniv.com/


ä»Šå›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚‚å…¬é–‹ã—ã¦ã„ã¾ã™ï¼
https://github.com/takaku1222/photo_picture


# å‚è€ƒã«ã—ãŸè¨˜äº‹
https://zenn.dev/kazutxt/books/flutter_practice_introduction/viewer/smartphone_picture_video

https://masamarun.com/flutter-image_picker/

https://pub.dev/packages/image_picker
